{"version":3,"file":"index.js","sources":["../src/index.js"],"sourcesContent":["'use strict';\n\nObject.defineProperty(exports, '__esModule', { value: true });\n\nfunction _interopDefault (ex) { return (ex && (typeof ex === 'object') && 'default' in ex) ? ex['default'] : ex; }\n\nvar React = require('react');\nvar React__default = _interopDefault(React);\nvar PropTypes = _interopDefault(require('prop-types'));\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nfunction _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread2(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        _defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}\n\nfunction _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n\n  return target;\n}\n\nfunction _objectWithoutProperties(source, excluded) {\n  if (source == null) return {};\n\n  var target = _objectWithoutPropertiesLoose(source, excluded);\n\n  var key, i;\n\n  if (Object.getOwnPropertySymbols) {\n    var sourceSymbolKeys = Object.getOwnPropertySymbols(source);\n\n    for (i = 0; i < sourceSymbolKeys.length; i++) {\n      key = sourceSymbolKeys[i];\n      if (excluded.indexOf(key) >= 0) continue;\n      if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue;\n      target[key] = source[key];\n    }\n  }\n\n  return target;\n}\n\nfunction _slicedToArray(arr, i) {\n  return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _nonIterableRest();\n}\n\nfunction _toConsumableArray(arr) {\n  return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _nonIterableSpread();\n}\n\nfunction _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) {\n    for (var i = 0, arr2 = new Array(arr.length); i < arr.length; i++) arr2[i] = arr[i];\n\n    return arr2;\n  }\n}\n\nfunction _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}\n\nfunction _iterableToArray(iter) {\n  if (Symbol.iterator in Object(iter) || Object.prototype.toString.call(iter) === \"[object Arguments]\") return Array.from(iter);\n}\n\nfunction _iterableToArrayLimit(arr, i) {\n  if (!(Symbol.iterator in Object(arr) || Object.prototype.toString.call(arr) === \"[object Arguments]\")) {\n    return;\n  }\n\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n  var _e = undefined;\n\n  try {\n    for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}\n\nfunction _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance\");\n}\n\nfunction _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance\");\n}\n\nfunction styleInject(css, ref) {\n  if ( ref === void 0 ) ref = {};\n  var insertAt = ref.insertAt;\n\n  if (!css || typeof document === 'undefined') { return; }\n\n  var head = document.head || document.getElementsByTagName('head')[0];\n  var style = document.createElement('style');\n  style.type = 'text/css';\n\n  if (insertAt === 'top') {\n    if (head.firstChild) {\n      head.insertBefore(style, head.firstChild);\n    } else {\n      head.appendChild(style);\n    }\n  } else {\n    head.appendChild(style);\n  }\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = css;\n  } else {\n    style.appendChild(document.createTextNode(css));\n  }\n}\n\nvar css = \"@-webkit-keyframes styles_flapDownTop__1BWl_ {\\n  from {\\n    -webkit-transform: rotateX(0deg);\\n            transform: rotateX(0deg)\\n  }\\n\\n  50%, to {\\n    -webkit-transform: rotateX(90deg);\\n            transform: rotateX(90deg)\\n  }\\n}\\n\\n@keyframes styles_flapDownTop__1BWl_ {\\n  from {\\n    -webkit-transform: rotateX(0deg);\\n            transform: rotateX(0deg)\\n  }\\n\\n  50%, to {\\n    -webkit-transform: rotateX(90deg);\\n            transform: rotateX(90deg)\\n  }\\n}\\n\\n@-webkit-keyframes styles_flapDownBottom___KC9f {\\n  from, 50% {\\n    -webkit-transform: rotateX(90deg);\\n            transform: rotateX(90deg)\\n  }\\n\\n  90% {\\n    -webkit-transform: rotateX(20deg);\\n            transform: rotateX(20deg)\\n  }\\n\\n  80%, to {\\n    -webkit-transform: rotateX(0deg);\\n            transform: rotateX(0deg)\\n  }\\n}\\n\\n@keyframes styles_flapDownBottom___KC9f {\\n  from, 50% {\\n    -webkit-transform: rotateX(90deg);\\n            transform: rotateX(90deg)\\n  }\\n\\n  90% {\\n    -webkit-transform: rotateX(20deg);\\n            transform: rotateX(20deg)\\n  }\\n\\n  80%, to {\\n    -webkit-transform: rotateX(0deg);\\n            transform: rotateX(0deg)\\n  }\\n}\\n\\n.styles_digit__3_I6o {\\n  color: white;\\n  background-color: black;\\n  position: relative;\\n  display: inline-block;\\n  box-sizing: content-box;\\n  width: 1.1ch;\\n  height: 1em;\\n  font-family: sans-serif;\\n  line-height: 1em;\\n  text-align: center\\n}\\n\\n.styles_digit__3_I6o[data-mode=\\\"words\\\"] {\\n    width: 100%;\\n  }\\n\\n.styles_digit__3_I6o[data-mode=\\\"alpha\\\"] {\\n    width: 1.7ch;\\n  }\\n\\n.styles_hinge__2iwrZ {\\n  width: 100%;\\n  position: absolute;\\n  left: 0;\\n  top: 50%;\\n  -webkit-transform: translateY(-50%);\\n          transform: translateY(-50%);\\n  z-index: 3;\\n  box-sizing: border-box;\\n  height: 0.04em;\\n  background-color: inherit;\\n}\\n\\n.styles_flap__1tzQn {\\n  position: absolute;\\n  height: 100%;\\n  width: 100%;\\n  -webkit-animation-fill-mode: forwards;\\n          animation-fill-mode: forwards;\\n  -webkit-transform-origin: center;\\n          transform-origin: center;\\n  background-color: inherit;\\n  background: inherit;\\n  z-index: 1;\\n  border-radius: inherit;\\n  box-sizing: border-box\\n}\\n\\n.styles_flap__1tzQn.styles_animated__eXIXQ {\\n    -webkit-animation-duration: 300ms;\\n            animation-duration: 300ms;\\n    z-index: 2;\\n  }\\n\\n.styles_flap__1tzQn.styles_top__1as09 {\\n    -webkit-clip-path: polygon(0 50%, 100% 50%, 100% 0, 0 0);\\n            clip-path: polygon(0 50%, 100% 50%, 100% 0, 0 0)\\n  }\\n\\n.styles_flap__1tzQn.styles_top__1as09.styles_animated__eXIXQ {\\n      -webkit-transform: rotateX(50deg);\\n              transform: rotateX(50deg);\\n      opacity: 0.40;\\n    }\\n\\n.styles_flap__1tzQn.styles_top__1as09.styles_animated__eXIXQ.styles_final__1af3r {\\n      opacity: 1;\\n      -webkit-animation-name: styles_flapDownTop__1BWl_;\\n              animation-name: styles_flapDownTop__1BWl_;\\n      -webkit-animation-timing-function: ease-in;\\n              animation-timing-function: ease-in;\\n    }\\n\\n.styles_flap__1tzQn.styles_bottom__1CYW9 {\\n    -webkit-clip-path: polygon(0 100%, 100% 100%, 100% 50%, 0 50%);\\n            clip-path: polygon(0 100%, 100% 100%, 100% 50%, 0 50%)\\n  }\\n\\n.styles_flap__1tzQn.styles_bottom__1CYW9.styles_animated__eXIXQ.styles_final__1af3r {\\n      -webkit-animation-name: styles_flapDownBottom___KC9f;\\n              animation-name: styles_flapDownBottom___KC9f;\\n      -webkit-animation-timing-function: ease-out;\\n              animation-timing-function: ease-out;\\n    }\\n\";\nvar styles = {\"digit\":\"styles_digit__3_I6o\",\"hinge\":\"styles_hinge__2iwrZ\",\"flap\":\"styles_flap__1tzQn\",\"animated\":\"styles_animated__eXIXQ\",\"top\":\"styles_top__1as09\",\"final\":\"styles_final__1af3r\",\"flapDownTop\":\"styles_flapDownTop__1BWl_\",\"bottom\":\"styles_bottom__1CYW9\",\"flapDownBottom\":\"styles_flapDownBottom___KC9f\"};\nstyleInject(css);\n\nfunction createCommonjsModule(fn, module) {\n\treturn module = { exports: {} }, fn(module, module.exports), module.exports;\n}\n\nvar classnames = createCommonjsModule(function (module) {\n/*!\n  Copyright (c) 2017 Jed Watson.\n  Licensed under the MIT License (MIT), see\n  http://jedwatson.github.io/classnames\n*/\n/* global define */\n\n(function () {\n\n\tvar hasOwn = {}.hasOwnProperty;\n\n\tfunction classNames () {\n\t\tvar classes = [];\n\n\t\tfor (var i = 0; i < arguments.length; i++) {\n\t\t\tvar arg = arguments[i];\n\t\t\tif (!arg) continue;\n\n\t\t\tvar argType = typeof arg;\n\n\t\t\tif (argType === 'string' || argType === 'number') {\n\t\t\t\tclasses.push(arg);\n\t\t\t} else if (Array.isArray(arg) && arg.length) {\n\t\t\t\tvar inner = classNames.apply(null, arg);\n\t\t\t\tif (inner) {\n\t\t\t\t\tclasses.push(inner);\n\t\t\t\t}\n\t\t\t} else if (argType === 'object') {\n\t\t\t\tfor (var key in arg) {\n\t\t\t\t\tif (hasOwn.call(arg, key) && arg[key]) {\n\t\t\t\t\t\tclasses.push(key);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn classes.join(' ');\n\t}\n\n\tif (module.exports) {\n\t\tclassNames.default = classNames;\n\t\tmodule.exports = classNames;\n\t} else {\n\t\twindow.classNames = classNames;\n\t}\n}());\n});\n\nvar Flap = function Flap(_ref) {\n  var _classnames;\n\n  var _ref$bottom = _ref.bottom,\n      bottom = _ref$bottom === void 0 ? false : _ref$bottom,\n      _ref$animated = _ref.animated,\n      animated = _ref$animated === void 0 ? false : _ref$animated,\n      _ref$final = _ref[\"final\"],\n      _final = _ref$final === void 0 ? false : _ref$final,\n      _ref$hinge = _ref.hinge,\n      hinge = _ref$hinge === void 0 ? false : _ref$hinge,\n      children = _ref.children;\n\n  var classes = classnames(styles.flap, (_classnames = {}, _defineProperty(_classnames, styles.bottom, bottom), _defineProperty(_classnames, styles.top, !bottom), _defineProperty(_classnames, styles.animated, animated), _defineProperty(_classnames, styles[\"final\"], _final), _classnames));\n  return React__default.createElement(\"div\", {\n    className: classes\n  }, children, hinge && React__default.createElement(\"div\", {\n    className: styles.hinge,\n    \"data-kind\": \"hinge\"\n  }));\n};\nFlap.propTypes = {\n  bottom: PropTypes.bool,\n  animated: PropTypes.bool,\n  \"final\": PropTypes.bool,\n  hinge: PropTypes.bool\n};\n\nvar FlapDigit = function FlapDigit(_ref) {\n  var className = _ref.className,\n      css = _ref.css,\n      _ref$value = _ref.value,\n      value = _ref$value === void 0 ? '' : _ref$value,\n      _ref$prevValue = _ref.prevValue,\n      prevValue = _ref$prevValue === void 0 ? '' : _ref$prevValue,\n      _ref$final = _ref[\"final\"],\n      _final = _ref$final === void 0 ? false : _ref$final,\n      _ref$mode = _ref.mode,\n      mode = _ref$mode === void 0 ? null : _ref$mode,\n      restProps = _objectWithoutProperties(_ref, [\"className\", \"css\", \"value\", \"prevValue\", \"final\", \"mode\"]);\n\n  return React__default.createElement(\"div\", {\n    className: styles.digit,\n    \"data-kind\": \"digit\",\n    \"data-mode\": mode\n  }, React__default.createElement(Flap, restProps, value), React__default.createElement(Flap, _extends({\n    bottom: true\n  }, restProps), prevValue), React__default.createElement(Flap, _extends({\n    key: \"top-\".concat(prevValue),\n    animated: true,\n    \"final\": _final\n  }, restProps), prevValue), _final && React__default.createElement(Flap, _extends({\n    key: \"bottom-\".concat(value),\n    bottom: true,\n    animated: true,\n    \"final\": true\n  }, restProps), value));\n};\nFlapDigit.propTypes = {\n  mode: PropTypes.string,\n  className: PropTypes.string,\n  value: PropTypes.string,\n  prevValue: PropTypes.string,\n  \"final\": PropTypes.bool\n};\n\n// to avoid in-between render states\n\nvar InitialCursor = {\n  current: -1,\n  previous: -1,\n  target: 0\n};\nvar FlapStack = function FlapStack(_ref) {\n  var stack = _ref.stack,\n      value = _ref.value,\n      timing = _ref.timing,\n      restProps = _objectWithoutProperties(_ref, [\"stack\", \"value\", \"timing\"]);\n\n  var _useState = React.useState(InitialCursor),\n      _useState2 = _slicedToArray(_useState, 2),\n      cursor = _useState2[0],\n      setCursor = _useState2[1];\n\n  React.useEffect(function () {\n    setCursor(InitialCursor);\n  }, [stack]);\n  React.useEffect(function () {\n    var current = cursor.current,\n        previous = cursor.previous;\n    var target = Math.max(stack.indexOf(value), 0);\n\n    var increment = function increment() {\n      previous = current;\n\n      if (current >= stack.length - 1) {\n        current = 0;\n      } else {\n        current = current + 1;\n      }\n\n      setCursor({\n        current: current,\n        previous: previous,\n        target: target\n      });\n    };\n\n    increment();\n    var timer = setInterval(function () {\n      if (current === target) {\n        clearInterval(timer);\n      } else {\n        increment();\n      }\n    }, timing);\n    return function () {\n      return clearInterval(timer);\n    };\n  }, [stack, value]);\n  var current = cursor.current,\n      previous = cursor.previous,\n      target = cursor.target;\n  return React__default.createElement(FlapDigit, _extends({\n    value: stack[current],\n    prevValue: stack[previous],\n    \"final\": current === target\n  }, restProps));\n};\nFlapStack.propTypes = {\n  stack: PropTypes.arrayOf(PropTypes.string).isRequired,\n  value: PropTypes.string.isRequired,\n  timing: PropTypes.number.isRequired\n};\n\nvar Presets = {\n  NUM: ' 0123456789',\n  ALPHANUM: ' 0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ'\n};\n\nvar Modes = {\n  Numeric: 'num',\n  Alphanumeric: 'alpha',\n  Words: 'words'\n};\n\nvar splitChars = function splitChars(v) {\n  return String(v).split('').map(function (c) {\n    return c.toUpperCase();\n  });\n};\n\nvar padValue = function padValue(v, length, padChar, padStart) {\n  var trimmed = v.slice(0, length);\n  return padStart ? String(trimmed).padStart(length, padChar) : String(trimmed).padEnd(length, padChar);\n};\n\nvar FlapDisplay = function FlapDisplay(_ref) {\n  var id = _ref.id,\n      className = _ref.className,\n      css = _ref.css,\n      value = _ref.value,\n      _ref$chars = _ref.chars,\n      chars = _ref$chars === void 0 ? Presets.NUM : _ref$chars,\n      words = _ref.words,\n      length = _ref.length,\n      _ref$padChar = _ref.padChar,\n      padChar = _ref$padChar === void 0 ? ' ' : _ref$padChar,\n      _ref$timing = _ref.timing,\n      _ref$hinge = _ref.hinge,\n      _ref$padMode = _ref.padMode,\n      padMode = _ref$padMode === void 0 ? 'auto' : _ref$padMode,\n      render = _ref.render,\n      restProps = _objectWithoutProperties(_ref, [\"id\", \"className\", \"css\", \"value\", \"chars\", \"words\", \"length\", \"padChar\", \"timing\", \"hinge\", \"padMode\", \"render\"]);\n\n  var _useState = React.useState([]),\n      _useState2 = _slicedToArray(_useState, 2),\n      stack = _useState2[0],\n      setStack = _useState2[1];\n\n  var _useState3 = React.useState(Modes.Numeric),\n      _useState4 = _slicedToArray(_useState3, 2),\n      mode = _useState4[0],\n      setMode = _useState4[1];\n\n  var _useState5 = React.useState([]),\n      _useState6 = _slicedToArray(_useState5, 2),\n      digits = _useState6[0],\n      setDigits = _useState6[1];\n\n  var _useState7 = React.useState([]),\n      _useState8 = _slicedToArray(_useState7, 2),\n      children = _useState8[0],\n      setChildren = _useState8[1];\n\n  React.useEffect(function () {\n    if (words && words.length) {\n      setStack(words);\n      setMode(Modes.Words);\n    } else {\n      setStack(splitChars(chars));\n      setMode(chars.match(/[a-z]/i) ? Modes.Alphanumeric : Modes.Numeric);\n    }\n  }, [chars, words]);\n  React.useEffect(function () {\n    if (words && words.length) {\n      setDigits([value]);\n    } else {\n      var padStart = padMode === 'auto' ? !!value.match(/^[0-9.,+-]*$/) : padMode === 'start';\n      setDigits(splitChars(padValue(value, length, padChar, padStart)));\n    }\n  }, [value, chars, words, length, padChar, padMode]);\n  React.useEffect(function () {\n    setChildren(digits.map(function (digit, i) {\n      return React__default.createElement(FlapStack, _extends({\n        key: i,\n        stack: stack,\n        value: digit,\n        mode: mode\n      }, restProps));\n    }));\n  }, [digits].concat(_toConsumableArray(Object.values(restProps))));\n  return render ? render(_objectSpread2({\n    id: id,\n    className: className,\n    css: css\n  }, restProps, {\n    children: children\n  })) : React__default.createElement(\"div\", {\n    id: id,\n    className: className,\n    css: css,\n    \"aria-hidden\": \"true\",\n    \"aria-label\": value\n  }, children);\n};\nFlapDisplay.propTypes = {\n  id: PropTypes.string,\n  css: PropTypes.object,\n  className: PropTypes.string,\n  value: PropTypes.string.isRequired,\n  chars: PropTypes.string,\n  words: PropTypes.arrayOf(PropTypes.string),\n  length: PropTypes.number,\n  padChar: PropTypes.string,\n  padMode: PropTypes.string,\n  timing: PropTypes.number,\n  hinge: PropTypes.bool,\n  render: PropTypes.func\n};\n\nexports.FlapDisplay = FlapDisplay;\nexports.Presets = Presets;\n//# sourceMappingURL=index.js.map\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,SAAS,WAAT,CAAqB,GAArB,EAA0B,GAA1B,EAA+B;MACxB,GAAG,KAAK,KAAK,CAAlB,EAAsB,GAAG,GAAG,EAAN;MAClB,QAAQ,GAAG,GAAG,CAAC,QAAnB;;MAEI,CAAC,GAAD,IAAQ,OAAO,QAAP,KAAoB,WAAhC,EAA6C;;;;MAEzC,IAAI,GAAG,QAAQ,CAAC,IAAT,IAAiB,QAAQ,CAAC,oBAAT,CAA8B,MAA9B,EAAsC,CAAtC,CAA5B;MACI,KAAK,GAAG,QAAQ,CAAC,aAAT,CAAuB,OAAvB,CAAZ;EACA,KAAK,CAAC,IAAN,GAAa,UAAb;;MAEI,QAAQ,KAAK,KAAjB,EAAwB;QAClB,IAAI,CAAC,UAAT,EAAqB;MACnB,IAAI,CAAC,YAAL,CAAkB,KAAlB,EAAyB,IAAI,CAAC,UAA9B;KADF,MAEO;MACL,IAAI,CAAC,WAAL,CAAiB,KAAjB;;GAJJ,MAMO;IACL,IAAI,CAAC,WAAL,CAAiB,KAAjB;;;MAGE,KAAK,CAAC,UAAV,EAAsB;IACpB,KAAK,CAAC,UAAN,CAAiB,OAAjB,GAA2B,GAA3B;GADF,MAEO;IACL,KAAK,CAAC,WAAN,CAAkB,QAAQ,CAAC,cAAT,CAAwB,GAAxB,CAAlB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;"}